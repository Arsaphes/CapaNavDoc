@* ReSharper disable Html.PathError *@

@using CapaNavDoc.Extensions
@using CapaNavDoc.ViewModel
@model CenterListViewModel

@{
    Layout = "~/Views/Shared/MyLayout.cshtml";
}

@section TitleSection
{
    Ateliers
}

@section HeaderSection
{
    <link href="~/Content/GridViewStyle.css" rel="stylesheet" />
    <script src="~/Scripts/jquery-3.1.1.min.js"></script>
    <script src="~/Scripts/jquery-ui-1.12.1.min.js"></script>
    <script src="~/Scripts/jquery.unobtrusive-ajax.js"></script>
    <script src="~/Scripts/Dialog.js"></script>
}

@section ContentBody
{
    <div id="editDialog" style="display: none;"></div>
    <div id="confirmDialog" style="display: none;"></div>
    <script type="text/javascript">
        $(document)
            .ready(function() {
                initDialod("#editDialog", 320);
                initDialod("#confirmDialog", 340);
                document.getElementById("AdministrationLink").className += "ActiveLink";
            });
    </script>

    <div class="PageTitle">
        Gestion des atelier.
    </div>

    <div class="PageGridView">
        <table class="GridViewTable CentersTable">
            <tr>
                <th>Code</th>
                <th>Utilisateurs</th>
                <th>Editer</th>
                <th>Supprimer</th>
            </tr>
            @foreach (CenterDetailsViewModel center in Model.CentersDetails)
            {
                <tr>
                    <td>@center.Name</td>
                    <td><a href="/Center/ManageUsers?centerId=@center.Id"><img src="~/Content/Icons/User-Group-icon.png" alt="Users" /></a></td>
                    <td>
                        @Ajax.HtmlActionLink("<img src='/Content/Icons/Pencil-icon.png' />", "GetCenterUpdateView",
                            new { centerId = @center.Id },
                            new AjaxOptions { HttpMethod = "GET", UpdateTargetId = "editDialog", InsertionMode = InsertionMode.Replace, OnSuccess = "openPopup('#editDialog');" }, null)
                    </td>
                    <td>
                        @Ajax.HtmlActionLink("<img src='/Content/Icons/Close-2-icon.png' />", "GetConfirmationView",
                            new { centerId = @center.Id },
                            new AjaxOptions { HttpMethod = "GET", UpdateTargetId = "confirmDialog", InsertionMode = InsertionMode.Replace, OnSuccess = "openPopup('#confirmDialog');" }, null)
                    </td>
                </tr>
            }
            <tr>
                <td colspan="6">
                    @Ajax.ActionLink("Ajouter un atelier", "GetCenterInsertView", "",
                        new AjaxOptions { HttpMethod = "GET", UpdateTargetId = "editDialog", InsertionMode = InsertionMode.Replace, OnSuccess = "openPopup('#editDialog');" },
                        new { @class = "btn btn-success" })
                </td>
            </tr>
        </table>
    </div>
}




